#! /usr/bin/env bash

if [[ -z "${IN_GHOSTTY_FLOAT:-}" ]]; then
  export IN_GHOSTTY_FLOAT=1
  exec open-ghostty -f "$(realpath "$0")" "$@"
fi

for arg in "$@"; do
  case "$arg" in
  -S)
    pacman -Slq |
      fzf --style=minimal --preview="pacman -Si {1}" |
      xargs -ro sudo pacman -S
    ;;
  -R)
    pacman -Qeq |
      fzf --style=minimal --preview="pacman -Qi {1}" |
      xargs -ro sudo pacman -Rns
    ;;
  *)
    echo "Specify '-S' to install or '-R' to remove"
    ;;
  esac
done
